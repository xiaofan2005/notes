# ~~实验一~~

~~一、实验环境：~~

~~Windows下的虚拟机环境~~

~~二、实验目标：~~

~~熟练掌握在已安装的Windows操作系统g中利用虚拟机安装Linux操作系统；培养动手能力。~~

~~三、试验内容~~

~~在已安装Windows操作系统的计算机上通过虚拟机安装Linux操作系统。~~

~~四、试验要求~~

~~1.能独立完成实训任务~~

~~2.能灵活运用所学技能进行类似任务~~

~~3.能相互协作、帮助同伴，发挥团队精神~~

~~五、试验步骤~~	

~~1.首先打开虚拟机软件，建立虚拟机~~

~~2.设置虚拟机的安装来源为镜像文件，选择对应的系统镜像~~

~~3.按照提示安装Linux系统，将语言设置为中文，硬盘分区为”/”、”/boot”、“swap”三个分区，其他设置为默认即可。~~

~~4.重启引导程序，设置开机选项。~~

# ~~实验二~~

~~1.认识GNOME桌面环境~~

~~2.了解常用快捷键~~  

~~3.改变输入法~~

~~4.更换桌面背景图片~~

~~5.修改屏幕分辨率~~

~~6.设置Dock面板可隐藏；在Dock面板上添加终端、文件、文本编辑器图标，并将其顺序调整为从上到下（从左到右）依次排列~~

~~\7. 设置鼠标属性，改变鼠标主按钮和指针速度，改变鼠标双击延时~~

~~\8. 体验文件功能，查看“其他位置”中的“计算机”~~

~~\9. 体验LibreOffice中的Writer、Impress和Calc~~

~~\10. **选做**尝试创建虚拟机的快照，并从快照中恢复。~~

~~\11. **选做**有兴趣的同学可以尝试安装其他主题，或者为系统安装KDE桌面环境，并进入KDE桌面比较其和GNOME桌面的区别~~

# 实验三

Shell命令完成如下操作：

\1. ls命令

（1）用ls /bin查看linux系统最基础的、所有用户都能使用的外部命令

（2）用ls /sbin查看只有超级用户root才能使用的、管理linux系统的外部命令

（3）用ls /usr/bin及ls /usr/local/bin查看所有用户都能使用的可执行程序目录

（4）用ls /usr/sbin及ls /usr/local/sbin查看只有超级用户root才能使用的、管理linux系统的可执行程序目录

\2. man命令

使用man命令查看指定命令的手册页帮助信息，格式：man 命令名

\3. --help命令

使用--help命令查看命令的帮助信息，格式：命令名 --help（注意是两个短横线）

\4. 尝试top命令并使用Ctrl+c体验Shell命令的中断

\5. 使用ping www.baidu.com命令检测网络是否连通，并使用shell的中断控制中断ping

\6. 使用cal命令显示日历

\7. 使用date命令修改系统日期   **`sudo date --set="YYYY-MM-DD HH:MM"`** **一定要用管理员身份运行**`sudo date --date="YYYY-MM-DD HH:MM"`

\8. 使用Tab键自动补全命令名或文件名及文件目录

\9. 用history查看命令执行的历史记录，并再次执行指定序号的shell命令  **`! 序列号`**

10.尝试用su切换到root账户（部分电脑需要先设置一下root密码）

11.创建一个名为自己学号+姓名拼音的目录，再删除这个目录

12.尝试用reboot命令和shutdown命令重启虚拟机  **`sudo reboot` `sudo shutdown -r now`** 

# 实验四

【实验内容】用Shell命令完成如下操作：

\1. 使用apt方式安装python3.6，当前账户未配置sudo权限时需要切换到root账户

\2. 使用多种方式打开终端Terminal（图形界面、快捷键）

\3. 查看Shell内部命令、外部命令

4.使用--help查看ls命令的各种选项，并在用户主目录下完成对 /usr/local 目录选项为a、l、F、r、R、s的尝试，挑2个长选项进行尝试。

\5. 使用绝对路径切换到用户主目录，再用相对路径切换到 /usr/local 目录

\6. 在用户主目录下新建一个目录test，在test目录下再用touch命令新建一个file.txt文件，将file.txt文件剪切到桌面上，并且更名为file1.txt

\7. 通配符的使用

（1）“*”的使用：列出/etc下所有.conf文件   **`ls /etc/*.conf`**

（2）“?”的使用：列出/etc下文件名第2位至第4位是ost的文件（文件后缀为任何，即文件名的“.”后为任何字符） **`ls /etc/?ost*`**

\8. 网络服务探测

借用telnet命令探测服务运行情况，格式telnet dn port或telnet ip port，网站域名（dn）默认端口（port）为80，可尝试探测www.baidu.com的80端口和90端口

当出现Escape character is '^]'.时表示服务可达，此时按Ctrl+]退出返回至telnet命名，再输入quit退出telnet命令，当出现Trying……时表示服务不可达。

\9. 了解并尝试其他Shell命令，如cd、mkdir、df、find、mv、top、ps

\10. 尝试top命令并了解各项数据的含义

# 实验五

、使用mkdir创建如下目录 ：

/usr/local/src/softwareA/cn/com/java1

/usr/local/src/softwareB/cn/com/java2

/usr/local/src/softwareB/cn/com/java3

2、使用绝对路径cd到java1，再从java1使用相对路径cd到java2

3、使用rmdir删除softwareA和softwareB

4、使用file命令检测不同类型的目标，如目录、文本文件和Linux外部命令文件

5、使用cp命令复制 /etc下文件名第2位至第4位是ost的所有文件到 /var/tmp    **`cp /etc/?ost* /var/tmp`**

6、使用find命令搜索 /etc 目录下文件名第2位至第4位是ost的所有内容  **`find /etc -name "*.conf" -print`**

7、对 /etc/apt/sources.list 文件完成如下操作：

①使用cat查看文本

②使用more命令和less分屏显示文档内容

③使用tail命令显示文本结尾的10行   `tail -n 文件` 查看末尾n行内容

④使用head命令显示文本的首10行 

8、使用touch在用户主目录创建file1文件并使用 ln 命令创建其硬链接file1_ln，对源文件和链接文件，尝试用gedit编辑其中一个保存后再查看另一个改动情况，尝试删除其中一个再查看另一个的打开情况

9、使用touch在用户主目录创建file2文件并使用 ln 命令创建其软链接file2_ln，对源文件和链接文件，尝试用gedit编辑其中一个保存后再查看另一个改动情况，尝试删除其中一个再查看另一个的打开情况

10、**选做** 执行rm –rf /*

# 实验六

2、为系统创建一个以自己姓名全拼为账户名称的账户

3、修改当前账户的密码

4、创建一个文件rwxTest，然后对文件进行权限配置（语法1）

①配置文件对所有用户开放所有权限

②配置文件权限对group和others取消执行权限

③配置文件权限对others取消读取和写入权限

④配置文件权限对group用户取消写入权限

5、创建一个文件rwxTest2，然后对文件进行权限配置（语法2，八进制）

①配置文件对所有用户开放所有权限

②配置文件权限对user开放所有权限，group和others开放读写权限

③配置文件权限对user开放所有权限，group开放读写权限，others开放执行权限

④配置文件权限对user开放读写权限，group开放读权限，others关闭所有权限

6、通配符“[]、-、！”的使用：列出 /etc下所有名称3个字符且首字母为a-e的文件和目录，列出 /etc下所有名称3个字符且首字母不是a-s的文件和目录

7、将 /etc 目录下的内容清单输出重定向到etcList.txt，并把用户主目录下的内容清单追加输出到etcList.txt

8、使用grep命令利用正则表达式过滤 /etc/apt/sources.list 文件中满足如下条件的行：

①以deb开头的行

②以Ubuntu结尾的行

③包含如下规律的所有行，字母N或者字母n紧接字符"."再紧接任意一个字符

9、使用find命令搜索 /etc 目录下文件名第2位至第4位是ost的所有内容，然后再使用Shell管道（|）配合grep命令抓取包含 de 字样的内容

10、查看一个后台进程的进程号，并且将该后台进程杀死

11、尝试进程查看命令pstree、ps –ef和其他进程命令kill、fg、bg

## 题解

6.列出 `/etc` 下所有名称3个字符且首字母为 a-e 的文件和目录，可以使用以下命令：

```shell
ls /etc/[a-e]??
```

这个命令使用了文件名展开功能，其中 `[a-e]` 匹配以字母 a 到 e 开头的任何字符，而 `??` 匹配任何两个字符。因此，此命令将列出所有以 a、b、c、d 或 e 开头的 3 个字符的文件和目录。

要列出 `/etc` 下所有名称 3 个字符且首字母不是 a-s 的文件和目录，可以使用以下命令：

```shell
ls /etc/[!a-s]??
```

这个命令也使用了文件名展开功能。其中 `[^a-s]` 匹配不以字母 a 到 s 开头的任何字符，而 `??` 匹配任何两个字符。因此，此命令将列出所有以除 a 到 s 以外的任何字符开头的 3 个字符的文件和目录。

8.

```sh
grep -E '^deb.*Ubuntu$|^.*[nN]\..$' /etc/apt/sources.list
```



9.要使用`find`命令搜索`/etc`目录下文件名第2位至第4位是ost的所有内容，并使用Shell管道（|）配合`grep`命令抓取包含 de 字样的内容，可以使用以下命令：

```sh
find /etc -name '?ost*' | xargs grep 'de'
```

这个命令会在`/etc`目录下查找所有文件名第2位至第4位是ost的文件，然后将查找结果通过管道传递给`xargs`命令，`xargs`会把每个文件名作为参数传递给`grep`命令，并在每个文件中查找包含de的内容。`grep`命令会输出包含de的行。

以下是对命令中各个部分的解释：

- `find /etc -name '?ost*'`：查找`/etc`目录下所有文件名第2位至第4位是ost的文件。`-name`选项用于指定文件名模式，`?`表示匹配任意字符，`*`表示匹配任意多个字符。
- `|`：管道符，用于将前一个命令的输出传递给后一个命令。
- `xargs`：将标准输入的数据转换成命令行参数。`xargs`命令会把通过管道传递过来的文件名作为参数传递给`grep`命令。
- `grep 'de'`：在每个文件中查找包含de的内容。`grep`命令会输出包含de的行。

# 实验七

Vi编辑器的使用

①创建viTest文件并用vi打开

②在文件中输入以下内容:

vi编辑器的使用方法

a、Vi编辑器的模式

b、编辑器模式之间的切换方法

c、插入文字的方法

d、保存编辑内容的方法

③显示行号：设置文本中的每一行显示行号

④插入内容：在文本中的第2行“1.Vi编辑器的”后插入“三种”

⑤添加内容：在文本的最后一行添加“vi编辑器的使用总结”。

⑥复制行：将文本的第4行复制并粘贴在最后一行。

⑦重复上一个命令4次，撤销3次，再反撤销2次。

⑧光标移动到第5行，删除下面3行

⑨保存退出

⑩**选做** 尝试课件中其他vi操作

2、程序前后台切换

用vi打开一个文件，然后把vi切换到为后台进程，再把vi重新切换为前台进程

3、编写一个Shell脚本，实现如下功能

​	自定义一个变量name并赋值为Linus，获取位置变量个数，如果为0则输出Hello与name变量的字符串拼接结果，如果为1则输出Hello与位置变量1的字符串拼接结果，再下一行输出位置变量1的长度及其第2位到第4位的字符。

# 题解

## 一

①创建viTest文件并用vi打开

- 首先需要在终端中进入要创建文件的目录，使用`cd`命令进行切换。
- 然后使用`touch viTest`命令创建文件。
- 最后使用`vi viTest`命令打开文件。

②在文件中输入以下内容:

- 进入Vi编辑器的命令模式，按下`i`键进入插入模式。
- 输入要编辑的内容，按下`Esc`键回到命令模式。

③显示行号：设置文本中的每一行显示行号

- 在Vi编辑器的命令模式下，输入`:set number`命令即可显示行号。

④插入内容：在文本中的第2行“1.Vi编辑器的”后插入“三种”

- 在Vi编辑器的命令模式下，先将光标移动到第2行，可以使用`2G`命令或者`2gg`命令。
- 然后按下`i`键进入插入模式，在“1.Vi编辑器的”后面输入“三种”。
- 按下`Esc`键回到命令模式。

⑤添加内容：在文本的最后一行添加“vi编辑器的使用总结”。

- 在Vi编辑器的命令模式下，先将光标移动到最后一行，可以使用`:$`命令。
- 然后按下`o`键，在下一行插入“vi编辑器的使用总结”。
- 按下`Esc`键回到命令模式。

⑥复制行：将文本的第4行复制并粘贴在最后一行。

- 在Vi编辑器的命令模式下，先将光标移动到第4行，可以使用`4G`命令或者`4gg`命令。
- 然后按下`yy`命令复制这一行。
- 将光标移动到最后一行，可以使用`:$`命令。
- 然后按下`p`命令粘贴复制的内容。

⑦重复上一个命令4次，撤销3次，再反撤销2次。

- 在Vi编辑器的命令模式下，按下`.`命令可以重复上一个命令。
- 按下`u`命令可以撤销上一个命令。
- 按下`Ctrl+r`命令可以反撤销上一个命令。

⑧光标移动到第5行，删除下面3行

- 在Vi编辑器的命令模式下，先将光标移动到第5行，可以使用`5G`命令或者`5gg`命令。
- 然后按下`d`命令删除光标所在行及其下面的两行。

⑨保存退出

- 在Vi编辑器的命令模式下，输入`:wq`命令即可保存并退出Vi编辑器。

## 二

要将vi切换到后台进程，请按Ctrl + z。这将暂停进程并返回到终端。

要将vi作为进程返回前台，请使用fg命令。这将使最近挂起的进程回到前台。

## 三

```shell
#!/bin/bash

# 自定义一个变量name并赋值为Linus
name="Linus"

# 获取位置变量个数
count=$#

if [ $count -eq 0 ]; then
  # 如果为0则输出Hello与name变量的字符串拼接结果
  echo "Hello \${name}"
elif [ $count -eq 1 ]; then
  # 如果为1则输出Hello与位置变量1的字符串拼接结果
  echo "Hello \$1"
  # 下一行输出位置变量1的长度及其第2位到第4位的字符
  echo "Length of \\$1: ${#1}"
  echo "Characters from 2 to 4: \${1:1:3}"
else
  # 如果位置变量个数大于1，则输出错误信息
  echo "Error: too many arguments"
fi
```

## 二（2）

1. 插入内容：在文本中的第2行“1.Vi编辑器的”后插入“三种”。

   a. 先使用光标移动到第2行，在命令模式下按下`i`键，进入插入模式。

   b. 输入要插入的文本“三种”。

   c. 按下`Esc`键，回到命令模式。

   d. 输入`:wq`命令保存并退出编辑器。

   以上步骤对应的Vi命令如下：

   ```sh
   2G  // 光标移动到第2行
   i  // 进入插入模式
   三种  // 输入要插入的文本
   Esc  // 回到命令模式
   ```
   
2. 添加内容：在文本的最后一行添加“vi编辑器的使用总结”。

   a. 在命令模式下按下`G`键，将光标移动到文件末尾。

   b. 按下`o`键，在下一行插入一个新行。

   c. 输入要添加的文本“vi编辑器的使用总结”。

   d. 按下`Esc`键，回到命令模式。

   e. 输入`:wq`命令保存并退出编辑器。

   以上步骤对应的Vi命令如下：

   ```sh
   G  // 将光标移动到文件末尾
   o  // 在下一行插入一个新行
   vi编辑器的使用总结  // 输入要添加的文本
   Esc  // 回到命令模式
   ```
   
3. 复制行：将文本的第4行复制并粘贴在最后一行。

   a. 在命令模式下将光标移动到第4行。

   b. 按下`yy`命令复制当前行。

   c. 将光标移动到文件末尾。

   d. 按下`p`命令将复制的行粘贴到最后一行。

   e. 输入`:wq`命令保存并退出编辑器。

   以上步骤对应的Vi命令如下：

   ```sh
   4G  // 将光标移动到第4行
   yy  // 复制当前行
   G  // 将光标移动到文件末尾
   p  // 粘贴复制的行到最后一行
   ```
   
4. 重复上一个命令4次，撤销3次，再反撤销2次。

   a. 在命令模式下按下`.`键4次，重复上一个命令4次。

   b. 在命令模式下按下`u`键3次，撤销3次。

   c. 在命令模式下按下`Ctrl+r`键2次，反撤销2次。

   以上步骤对应的Vi命令如下：

   ```sh
   ....  // 重复上一个命令4次
   uuu  // 撤销3次
   Ctrl+r  // 反撤销
   Ctrl+r  // 反撤销
   ```

5. 光标移动到第5行，删除下面3行。

   a. 在命令模式下将光标移动到第5行。

   b. 按下`V`键，进入可视化模式。

   c. 将光标移动到第8行。

   d. 按下`d`键，删除选中的3行。

# 实验八

编写如下功能的Shell脚本

1. 计算1~50的和
2.  自己列举5个数，求其中的最大值
3. **计算当前目录下可执行文件的数量** 

![CRA5@427GWG)6C)ORBL]IW1](D:\资料\学科学习资料\编程笔记\linux\CRA5@427GWG)6C)ORBL]IW1.jpg)

1. 将用户输入的文件名存入文件filenames并统计文件名个数，直至输入stop
